name: hokyoksei_workspace
description: Hokyoksei monorepo (Windows + iOS)
version: 0.1.0
publish_to: none

environment:
  sdk: ">=3.6.0 <4.0.0"

# Pub Workspaces 定義
# workspace:
#  - apps/*
#  - packages/*

# Melos 管理ツール
dev_dependencies:
  melos: ^7.3.0
  flutter_lints: any

melos:
  packages:
    - apps/**
    - packages/**
  command:
    bootstrap:
      usePubspecOverrides: true
    version:
      branch: main
  scripts:
    verify:
      run: |
        melos bootstrap
        melos run analyze
        melos run test
      description: Bootstrap workspace, then run analyze and test
    analyze:
      run: |
        (cd apps/dangi_app && flutter analyze)
        dart analyze packages/shared_core packages/l10n_ja packages/motion_tokens packages/ui_tokens
      description: Run analyzer for Flutter app and Dart packages
    test:
      run: |
        (cd apps/dangi_app && flutter test)
        (cd packages/shared_core && dart test)
      description: Run tests for all packages
