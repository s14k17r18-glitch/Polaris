name: polaris_workspace
description: Polaris monorepo (Windows + iOS)
version: 0.1.0
publish_to: none

environment:
  sdk: ">=3.6.0 <4.0.0"

# Pub Workspaces 定義（Melos 7）
workspace:
  - apps/dangi_app
  - packages/shared_core
  - packages/ui_tokens
  - packages/motion_tokens
  - packages/l10n_ja

# Melos 管理ツール
dev_dependencies:
  melos: ^7.3.0

melos:

  command:
    bootstrap:
      usePubspecOverrides: true
    version:
      branch: main

  scripts:
    analyze:
      run: dart analyze
      description: Run Dart analyzer for all packages

    format:
      run: dart format .
      description: Format all Dart files

    test:
      run: melos exec --dir-exists=test --concurrency=1 -- flutter test
      description: Run tests for all packages with test/ (sequential)

    verify:
      description: "Bootstrap + analyze + test (WSL/Windows共通の単一導線)"
      run: |
        melos bootstrap
        melos analyze
        melos run test
