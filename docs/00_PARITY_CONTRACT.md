# 00_PARITY_CONTRACT.md
Windows（PC）版と iOS（モバイル）版で「同一アプリ」として成立させるための拘束条件。
この契約は docs 配下の他仕様より優先する（矛盾があれば本契約に合わせて仕様側を修正する）。

---

## MUST（完全一致）

### 1) Personaデータ
- 同一 schema（同一フィールド・同一型・同一バリデーション）
- 同一同期（同一ID体系・同一更新規則・同一競合ルール）
- 同一表示（同一の解釈・同一のUI反映）

### 2) 談議データ（Session / Message / Crystal など）
- 同一 schema（同一フィールド・同一型・同一バリデーション）
- 同一同期（同一ID体系・同一更新規則・同一競合ルール）
- 同一再現（同じ入力に対して同じ状態遷移・同じ復元ができる）

### 3) UIトークン（見た目）
- 共通のUIトークン定義を参照する（色 / 余白 / 角丸 / 影）
- OS別に値を分岐しない（「OSっぽくする」を理由にズラさない）

### 4) モーション（アニメーション）
- 共通のモーション定数を参照する（duration / curve）
- OS別にアニメ/時間/イージングを分岐しない

### 5) 文言（完全日本語）
- UI文言、エラーメッセージ、ユーザーに見えるログは日本語のみ
- 英語の固定文言を直書きしない（デバッグ表示もユーザー可視なら対象）

---

## 許容差（例外）
- 入力方法の違いのみ許可する
  - PC：キーボード / マウス
  - iOS：タップ / スワイプ
- 機能差（できる/できない、フロー違い、保存形式違い等）は不可

---

## 例外申請（必須）
MUSTを破る必要が出た場合、実装は止めて以下を提示する（勝手に実装しない）。
- 例外の内容（どのMUSTを破るか）
- 理由（技術的制約 / OS制限 / 代替案の検討結果）
- 影響範囲（UI/保存/同期/テスト/既存データへの影響）
- 代替案（契約を守る案があるなら優先）
- 推奨（採用するなら最小差分）
